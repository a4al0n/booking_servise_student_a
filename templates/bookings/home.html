{% extends 'base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏—Ç–æ—Ä–∏–π{% endblock %}

{% block content %}
<div class="hero">
    <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
    <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏</p>
</div>

<div class="booking-form-container">
    <form method="post" class="booking-form" id="bookingForm">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="user_email">Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *</label>
            <input 
                type="email" 
                id="user_email" 
                name="user_email" 
                required
                placeholder="example@mail.com"
                class="form-control">
        </div>

        <div class="form-group">
            <label for="room_number">–ù–æ–º–µ—Ä –∞—É–¥–∏—Ç–æ—Ä–∏–∏ *</label>
            <input 
                type="text" 
                id="room_number" 
                name="room_number" 
                required
                placeholder="101"
                class="form-control">
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="booking_date">–î–∞—Ç–∞ *</label>
                <input 
                    type="date" 
                    id="booking_date" 
                    name="booking_date" 
                    required
                    min="{{ today|date:'Y-m-d' }}"
                    class="form-control">
            </div>

            <div class="form-group">
                <label for="start_time">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ *</label>
                <input 
                    type="time" 
                    id="start_time" 
                    name="start_time" 
                    required
                    class="form-control">
            </div>

            <div class="form-group">
                <label for="end_time">–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è *</label>
                <input 
                    type="time" 
                    id="end_time" 
                    name="end_time" 
                    required
                    class="form-control">
            </div>
        </div>

        <div class="form-group">
            <label for="booking_type">–¢–∏–ø –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è *</label>
            <select id="booking_type" name="booking_type" required class="form-control">
                <option value="lesson">–ó–∞–Ω—è—Ç–∏–µ</option>
                <option value="exam">–≠–∫–∑–∞–º–µ–Ω</option>
                <option value="meeting">–°–æ–±—Ä–∞–Ω–∏–µ</option>
            </select>
        </div>

        <div class="form-group">
            <label for="purpose">–¶–µ–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</label>
            <textarea 
                id="purpose" 
                name="purpose" 
                rows="3"
                placeholder="–û–ø–∏—à–∏—Ç–µ —Ü–µ–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è..."
                class="form-control"></textarea>
        </div>

        <button type="submit" class="btn btn-primary">
            üìÖ –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        </button>
    </form>
</div>

{% if recent_bookings %}
<div class="recent-bookings">
    <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
    <div class="bookings-grid">
        {% for booking in recent_bookings %}
        <div class="booking-card status-{{ booking.status }}">
            <div class="booking-header">
                <span class="room-number">üö™ {{ booking.room_number }}</span>
                <span class="status-badge status-{{ booking.status }}">
                    {% if booking.status == 'confirmed' %}‚úì{% elif booking.status == 'rejected' %}‚úó{% else %}‚è≥{% endif %}
                    {{ booking.get_status_display }}
                </span>
            </div>
            <div class="booking-info">
                <p>üìÖ {{ booking.booking_date|date:"d.m.Y" }}</p>
                <p>‚è∞ {{ booking.start_time|time:"H:i" }} - {{ booking.end_time|time:"H:i" }}</p>
                <p>üë§ {{ booking.user_email }}</p>
                <p>üìã {{ booking.get_booking_type_display }}</p>
            </div>
            <a href="{% url 'booking_detail' booking.pk %}" class="btn btn-sm">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
        </div>
        {% endfor %}
    </div>
    <a href="{% url 'booking_list' %}" class="btn btn-secondary">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ‚Üí</a>
</div>
{% endif %}

{% endblock %}